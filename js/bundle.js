(()=>{"use strict";function e(e){document.querySelector(e).classList.add("show"),document.body.style.overflow="hidden"}window.addEventListener("DOMContentLoaded",(()=>{var t;(function(e,t,s,o){const a=document.querySelectorAll(e),c=document.querySelectorAll(t),r=document.querySelector(s);function i(){c.forEach((e=>{e.classList.add("hide"),e.classList.remove("show")})),a.forEach((e=>{e.classList.remove(o)}))}function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c[e].classList.add("show"),c[e].classList.remove("hide"),a[e].classList.add(o)}i(),n(0),r.addEventListener("click",(t=>{const s=t.target;s&&s.classList.contains(e.slice(1))&&a.forEach(((e,t)=>{s==e&&(i(),n(t))}))}))})(".tabheader__item",".tabcontent",".tabheader__items","tabheader__item_active"),function(){class e{constructor(e,t,s,o,a,c){this.title=e,this.desciption=t,this.price=s,this.img=a,this.parent=document.querySelector(c),this.currency=o,this.currencyValue=3;for(var r=arguments.length,i=new Array(r>6?r-6:0),n=6;n<r;n++)i[n-6]=arguments[n];this.classes=i,this.convertToUAH()}convertToUAH(){this.price=this.price*this.currencyValue}render(){const e=document.createElement("div");this.classes.length>=1?this.classes.forEach((t=>e.classList.add(t))):(this.block="menu__item",e.classList.add(this.block)),e.innerHTML=`\n            <img src="${this.img}" alt="${this.title}">\n            <h3 class="menu__item-subtitle">${this.title}</h3>\n            <div class="menu__item-descr">${this.desciption}</div>\n            <div class="menu__item-divider"></div>\n            <div class="menu__item-price">\n                <div class="menu__item-cost">Цена:</div>\n                <div class="menu__item-total"><span>${this.price}</span> ${this.currency}/дней</div>\n            </div>\n        `,this.parent.append(e)}}(async e=>{const t=await fetch(e).then((t=>{if(t.ok)return t;throw new Error(`Could not feth\n                ${e}, status: ${t.status}`)}));return await t.json()})("http://localhost:3000/menu").then((t=>{t.forEach((t=>{let{img:s,title:o,descr:a,price:c}=t;new e(o,a,c,"грн",s,".menu__field .container","menu__item").render()}))})).catch((e=>{console.log(e)}))}(),function(){const e=document.querySelector(".calculating__result span");let t,s,o,a,c;function r(){e.textContent=t&&s&&o&&a&&c?"female"===t?Math.round((447.6+9.2*o+3.1*s-4.3*a)*c):Math.round((88.36+13.4*o+4.8*s-5.7*a)*c):"0"}localStorage.getItem("sex")?t=localStorage.getItem("sex"):localStorage.setItem("sex","female"),localStorage.getItem("ratio")?c=localStorage.getItem("ratio"):localStorage.setItem("ratio",1.375),document.querySelectorAll(".calculating__choose-item").forEach((e=>{e.hasAttribute("data-ratio")&&localStorage.getItem("ratio")?(e.classList.remove("calculating__choose-item_active"),e.getAttribute("data-ratio")===localStorage.getItem("ratio")&&e.classList.add("calculating__choose-item_active")):(e.classList.remove("calculating__choose-item_active"),e.getAttribute("id")===localStorage.getItem("sex")&&e.classList.add("calculating__choose-item_active"))})),function(){let e=document.querySelectorAll(".calculating__choose-item");e.forEach((i=>{"INPUT"==i.tagName?i.addEventListener("input",(()=>{switch(i.value.match(/\D/g)?i.style.borderBottom="1px solid red":i.style.borderBottom="none",i.getAttribute("id")){case"height":s=+i.value;break;case"weight":o=+i.value;break;case"age":a=+i.value}r()})):i.addEventListener("click",(s=>{s.target.hasAttribute("data-ratio")?(c=+s.target.getAttribute("data-ratio"),localStorage.setItem("ratio",+s.target.getAttribute("data-ratio")),e.forEach((e=>{e.hasAttribute("data-ratio")&&e.classList.remove("calculating__choose-item_active"),s.target.classList.add("calculating__choose-item_active")}))):(t=s.target.getAttribute("id"),localStorage.setItem("sex",s.target.getAttribute("id")),e.forEach((e=>{e.hasAttribute("data-ratio")||e.classList.remove("calculating__choose-item_active"),s.target.classList.add("calculating__choose-item_active")}))),r()}))}))}()}(),t="form",document.querySelectorAll(t).forEach((t=>{!function(t){function s(t){const s=document.querySelector(".modal__dialog");s.classList.add("hide"),e(".modal");const o=document.createElement("div");o.classList.add("modal__dialog"),o.innerHTML=`\n            <div class="modal__content">\n                <div data-close="" class="modal__close">×</div>\n                <div class="modal__title">${t}</div>\n            </div>`,document.querySelector(".modal").append(o),setTimeout((()=>{o.remove(),s.classList.remove("hide"),document.querySelector(void 0).classList.remove("show"),document.body.style.overflow="",clearInterval(e)}),3e3)}t.addEventListener("submit",(e=>{e.preventDefault();const o=document.createElement("img");o.setAttribute("src","img/spinner.svg"),o.style.cssText="\n            display: block;\n            margin: 0 auto;\n            ",t.insertAdjacentElement("afterend",o);const a=new FormData(t);(async(e,t)=>{const s=await fetch("http://localhost:3000/requests",{method:"POST",body:t,headers:{"Content-type":"application/json"}});return await s.json()})(0,JSON.stringify(Object.fromEntries(a.entries()))).then((e=>{console.log(e),s("Спасибо! Мы скоро с Вами свяжемся"),o.remove()})).catch((()=>{s("Что-то пошло не так")})).finally((()=>{t.reset()}))}))}(t)})),function(t,s){const o=document.querySelectorAll(t),a=document.querySelector(s);o.forEach((t=>{t.addEventListener("click",(()=>{e(s)}))})),a.addEventListener("click",(e=>{let t=e.target;t.closest(".modal__content")&&!t.hasAttribute("data-close")||(a.classList.remove("show"),document.body.style.overflow="")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&a.classList.contains("show")&&(a.classList.remove("show"),document.body.style.overflow="")})),window.addEventListener("scroll",(function t(){window.pageYOffset+document.documentElement.clientHeight>=document.documentElement.scrollHeight-10&&(e(s),window.removeEventListener("scroll",t))}))}("[data-modal]",".modal"),function(e){let{selector:t,slideSelector:s,slideToScroll:o,slidePrev:a,slideNext:c,field:r,transform:i,dots:n}=e;const l=document.querySelector(t),d=l.querySelector("#current"),u=l.querySelector("#total"),m=l.querySelectorAll(s),h=l.querySelector(a),g=l.querySelector(c),v=l.querySelector(".offer__slider-wrapper"),f=l.querySelector(r),_=l.querySelector(".offer__slide").offsetWidth;let y=1,L=o,S=0;if(i&&(f.style.width=m.length*_+"px",f.classList.add("slider-track"),m.forEach((e=>{e.style.width=_+"px"}))),n){const e=document.createElement("div");e.classList.add("carousel-indicators");for(let t=0;t<m.length;t++){const s=document.createElement("button");s.classList.add("dot"),s.setAttribute("data-index",t+1),e.append(s)}v.append(e),v.addEventListener("click",(e=>{let t=+e.target.getAttribute("data-index");e.target.classList.contains("dot")&&p(t)}))}function p(e){if(y=e,y>m.length?y=1:y<1&&(y=m.length),m.length<10?(d.textContent=`0${y}`,u.textContent=`0${m.length}`):(d.textContent=y,u.textContent=m.length),v.setAttribute("data-current-slide",y),n){const e=l.querySelectorAll(".dot"),t=v.getAttribute("data-current-slide");e.forEach(((e,s)=>{+t!==s+1?e.classList.remove("active"):e.classList.add("active")}))}i?(S=_*(y-1),f.style.transform=`translateX(${-S}px)`):m.forEach(((e,t)=>{t!==y-1?e.classList.add("hide"):e.classList.remove("hide")}))}h.addEventListener("click",(()=>{p(+v.getAttribute("data-current-slide")-L)})),g.addEventListener("click",(()=>{p(+v.getAttribute("data-current-slide")+L)})),p(1)}({selector:".offer__slider",slideSelector:".offer__slide",slidePrev:".offer__slider-prev",slideNext:".offer__slider-next",field:".offer__slider-inner",slideToScroll:1,transform:!0,dots:!0}),function(e,t){function s(e){return e>=0&&e<10?`0${e}`:e}!function(t){const o=document.querySelector(e),a=o.querySelector("#days"),c=o.querySelector("#hours"),r=o.querySelector("#minutes"),i=o.querySelector("#seconds"),n=setInterval((function(){const e=function(e){let t,s,o,a;const c=Date.parse(e)-Date.parse(new Date);return c<=0?(t=0,s=0,o=0,a=0):(t=Math.floor(c/864e5),s=Math.floor(c/36e5%24),o=Math.floor(c/1e3/60%60),a=Math.floor(c/1e3%60)),{total:c,days:t,hours:s,minutes:o,seconds:a}}(t);a.innerHTML=s(e.days),c.innerHTML=s(e.hours),r.innerHTML=s(e.minutes),i.innerHTML=s(e.seconds),e.total<=0&&clearInterval(n)}),1e3)}(t)}(".timer","2022-07-20")}))})();
//# sourceMappingURL=bundle.js.map